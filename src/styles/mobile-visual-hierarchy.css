@import "tailwindcss";

/* Mobile Visual Hierarchy System - Extends visual-hierarchy.css */
@layer utilities {
  /* Mobile Typography Scale - Optimized for readability without zoom */
  @media (max-width: 767px) {
    .vh-hero-title {
      font-size: clamp(2rem, 8vw + 0.5rem, 2.5rem);
      line-height: 1.15;
      letter-spacing: -0.02em;
    }
    
    .vh-section-title {
      font-size: clamp(1.75rem, 6vw + 0.5rem, 2rem);
      line-height: 1.2;
    }
    
    .vh-subsection-title {
      font-size: clamp(1.5rem, 5vw + 0.5rem, 1.75rem);
      line-height: 1.3;
    }
    
    .vh-card-title {
      font-size: clamp(1.25rem, 4vw + 0.5rem, 1.5rem);
      line-height: 1.4;
    }
    
    .vh-body-emphasis {
      font-size: clamp(1.125rem, 3vw + 0.5rem, 1.25rem);
      line-height: 1.6;
    }
    
    /* Ensure minimum 16px to prevent iOS zoom */
    .vh-body {
      font-size: max(1rem, 16px);
      line-height: 1.65;
    }
  }
  
  /* Touch Target Optimization - Apple HIG compliance */
  .touch-target {
    position: relative;
    min-height: 44px;
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Invisible expanded touch area */
  .touch-target::before {
    content: '';
    position: absolute;
    top: -8px;
    right: -8px;
    bottom: -8px;
    left: -8px;
    /* Debugging: uncomment to visualize touch areas */
    /* background: rgba(255, 0, 0, 0.1); */
  }
  
  /* Thumb Zone Optimization Classes */
  .thumb-zone-easy {
    /* Elements in easy thumb reach (50-85% viewport height) */
    @media (max-width: 767px) and (orientation: portrait) {
      position: sticky;
      bottom: calc(env(safe-area-inset-bottom) + 1rem);
      z-index: 40;
    }
  }
  
  .thumb-zone-fixed {
    /* Fixed positioning for critical CTAs */
    @media (max-width: 767px) {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1rem;
      background: linear-gradient(
        to top,
        var(--background) 0%,
        var(--background) 80%,
        transparent 100%
      );
      z-index: 50;
    }
  }
  
  /* Mobile Button Enhancements */
  .mobile-cta {
    position: relative;
    min-height: 44px;
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    font-size: 1.125rem;
    font-weight: 600;
    padding: 1rem 1.5rem;
    border-radius: 0.75rem;
    transition: transform 100ms ease, box-shadow 100ms ease;
    -webkit-tap-highlight-color: transparent;
  }
  
  .mobile-cta:active {
    transform: scale(0.98);
  }
  
  /* Mobile Section Spacing */
  @media (max-width: 767px) {
    .section-spacing-mobile {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }
    
    .section-spacing-mobile-compact {
      padding-top: 2rem;
      padding-bottom: 2rem;
    }
    
    /* Account for fixed CTAs */
    .section-spacing-mobile-with-cta {
      padding-bottom: 6rem;
    }
  }
  
  /* iOS Safe Areas Support */
  @supports (padding: env(safe-area-inset-bottom)) {
    .safe-area-padding-bottom {
      padding-bottom: env(safe-area-inset-bottom);
    }
    
    .safe-area-padding-top {
      padding-top: env(safe-area-inset-top);
    }
    
    .safe-area-margin-bottom {
      margin-bottom: env(safe-area-inset-bottom);
    }
  }
  
  /* Horizontal Scroll Prevention */
  @media (max-width: 767px) {
    .prevent-horizontal-scroll {
      overflow-x: hidden;
      max-width: 100vw;
    }
  }
  
  /* Touch Feedback States */
  .touch-feedback {
    position: relative;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Ripple Animation */
  @keyframes touch-ripple {
    0% {
      transform: scale(0);
      opacity: 0.5;
    }
    100% {
      transform: scale(4);
      opacity: 0;
    }
  }
  
  .touch-ripple {
    position: absolute;
    border-radius: 50%;
    background-color: currentColor;
    opacity: 0.2;
    pointer-events: none;
    animation: touch-ripple 600ms ease-out;
  }
  
  /* Mobile Card Optimizations */
  @media (max-width: 767px) {
    .mobile-card {
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.08);
    }
    
    /* Swipeable card container */
    .mobile-card-swipeable {
      position: relative;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    
    .mobile-card-swipeable::-webkit-scrollbar {
      display: none;
    }
    
    .mobile-card-swipeable > * {
      scroll-snap-align: start;
    }
  }
  
  /* Performance Optimizations for Slow Connections */
  @media (prefers-reduced-data: reduce), (max-width: 767px) {
    /* Disable non-essential animations */
    .reduced-motion * {
      animation-duration: 0.01ms !important;
      transition-duration: 0.01ms !important;
    }
    
    /* Simplified loading states */
    .mobile-skeleton {
      background: #f0f0f0;
      animation: none;
    }
  }
  
  /* Mobile Focus States */
  @media (hover: none) and (pointer: coarse) {
    /* Remove hover effects on touch devices */
    .hover\:scale-105:hover {
      transform: none;
    }
    
    /* Enhanced focus for touch accessibility */
    .vh-focus-visible:focus-visible {
      outline: 3px solid var(--color-primary);
      outline-offset: 2px;
    }
  }
}